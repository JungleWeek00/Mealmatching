<!DOCTYPE html>
<html>
<head>
    <title>Select Location</title>
</head>
<body>
    <h1>Select Location</h1>
    <p>Welcome, {{ get_logged_in_user().name if is_user_logged_in() else 'Guest' }}!</p>
    <ul>
        {% for location in locations %}
            <li>
                <a href="/location/{{ location.name }}">{{ location.name }}</a>
                <span> ({{ location.count }})</span>
                {% if is_user_logged_in() and not is_user_already_selected_location(get_logged_in_user().username) %}
                    <form method="POST" action="/select_location">
                        <input type="hidden" name="location" value="{{ location.name }}">
                        <input type="submit" value="참여하기">
                    </form>
                {% endif %}
            </li>
        {% endfor %}
    </ul>
</html>
